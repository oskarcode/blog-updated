


Directories:


Project: /home/ubuntu/blog-updated/
App:/home/ubuntu/blog-updated/blog

Settings.py:/home/ubuntu/blog-updated/blog/blog


Venv: /home/ubuntu/newportfolio/portfolio_venv/bin



Portfolio
Socket:

[Unit]

Description=gunicorn socket

[Socket]

ListenStream=/run/portfolio.sock

[Install]

WantedBy=sockets.target



Service:
[Unit]

Description=gunicorn daemon

Requires=portfolio.socket

After=network.target

[Service]

User=ubuntu

Group=ubuntu

WorkingDirectory=/home/ubuntu/portfolio

ExecStart=/home/ubuntu/portfolio_env/bin/gunicorn --workers 3 --bind unix:/run/portfolio.sock portfolio.wsgi:application


[Install]

WantedBy=multi-user.target



Blog:

[Unit]

Description=gunicorn socket

[Socket]

ListenStream=/run/blog.sock

[Install]

WantedBy=sockets.target



[Unit]

Description=gunicorn daemon

Requires=blog.socket

After=network.target

[Service]

User=ubuntu

Group=ubuntu

WorkingDirectory=/home/ubuntu/django-new-blog

ExecStart=/home/ubuntu/portfolio_env/bin/gunicorn --workers 3 --bind unix:/run/blog.sock blog.wsgi:application
[Install]

WantedBy=sockets.target




Portfolio:
server {
listen 80;
server_name 44.202.86.42 mycodeforever.com www.mycodeforever.com;


location / {
include proxy_params;
proxy_pass http://unix:/home/ubuntu/newportfolio/myportfolio/app.sock;
}

location /static/ {
 alias /home/ubuntu/newportfolio/static/;
}


location /media/ {
alias /home/ubuntu/newportfolio/media/;
}


}




Blog:

server {
listen 80;
server_name 44.202.86.42 oskarcode.com www.oskarcode.com;


location / {
include proxy_params;
proxy_pass http://unix:/home/ubuntu/newportfolio/myportfolio/app.sock;
}

location /static/ {
 alias /home/ubuntu/newportfolio/static/;
}


location /media/ {
alias /home/ubuntu/newportfolio/media/;
}


}




